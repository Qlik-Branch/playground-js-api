"use strict";var _createClass=function(){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var qlik_playground=function(){var t=function(){function t(){_classCallCheck(this,t),this.callbackList=[]}return _createClass(t,[{key:"subscribe",value:function(t){this.callbackList.push(t)}},{key:"deliver",value:function(n){this.callbackList.forEach(function(t,e){t(n)})}}]),t}(),n="https://developer-api.qlik.com/playground";function e(){this.notification=new t}return e.prototype=Object.create(Object.prototype,{notification:{writable:!0,value:null},notify:{value:function(t){this.notification.deliver(t)}},authenticate:{value:function(c,e){var s=this;return new Promise(function(i,r){var o="";e&&(o=e.toLowerCase()),s.notification.deliver({title:"Please wait...",message:"Authenticating"});var a,t=n+"/api/ticket?apikey="+c.apiKey;(a=t,new Promise(function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status?t(n.responseText):4==n.readyState&&200!=n.status&&e(n.responseText)},n.open("GET",a,!0),n.send()})).then(function(t){var e=JSON.parse(t);if(e.err)s.notification.deliver({sentiment:"negative",title:"Error",message:e.err}),r(e.err);else switch(o){case"qsocks":case"ticket":s.notification.deliver({title:"Ready",duration:300}),i(e.ticket);break;default:var n=(c.isSecure?"https://":"http://")+c.host+(c.port?":"+c.port:"")+"/playground/content/Default/authStub.html?qlikTicket="+e.ticket;for(var a in c.customParams)n+="&",n+=a,n+="=",n+=c.customParams[a];window.location=n}})})}}}),e}();window.Playground=new qlik_playground;