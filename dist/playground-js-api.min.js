"use strict";var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var qlik_playground=function(){var t=function(){function t(){_classCallCheck(this,t),this.callbackList=[]}return _createClass(t,[{key:"subscribe",value:function(t){this.callbackList.push(t)}},{key:"deliver",value:function(a){this.callbackList.forEach(function(t,e){t(a)})}}]),t}(),a="https://developer-api.qlik.com/playground";function e(){this.notification=new t}return e.prototype=Object.create(Object.prototype,{notification:{writable:!0,value:null},authenticate:{value:function(c,e){var s=this;return new Promise(function(i,r){var o="";e&&(o=e.toLowerCase()),s.notification.deliver({title:"Please wait...",message:"Authenticating"});var n,t=a+"/api/ticket?apikey="+c.apiKey;(n=t,new Promise(function(t,e){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status?t(a.responseText):4==a.readyState&&200!=a.status&&e(a.responseText)},a.open("GET",n,!0),a.send()})).then(function(t){var e=JSON.parse(t);if(e.err)s.notification.deliver({sentiment:"negative",title:"Error",message:e.err}),r(e.err);else switch(o){case"qsocks":case"ticket":s.notification.deliver({title:"Ready",duration:300}),i(e.ticket);break;default:var a=(c.isSecure?"https://":"http://")+c.host+(c.port?":"+c.port:"")+"/playground/content/Default/authStub.html?qlikTicket="+e.ticket;for(var n in c.customParams)a+="&",a+=n,a+="=",a+=c.customParams[n];window.location=a}})})}}}),e}();window.Playground=new qlik_playground;